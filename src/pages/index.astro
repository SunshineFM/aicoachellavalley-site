---
import { getCollection } from "astro:content";
import BaseLayout from "../layouts/BaseLayout.astro";

const signals = (await getCollection("signals"))
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
  .slice(0, 5);

const featuredSignal = signals[0];

const dateFormatter = new Intl.DateTimeFormat("en-US", {
  year: "numeric",
  month: "short",
  day: "2-digit",
});
---

<BaseLayout
  title="AI Coachella Valley (AICV)"
  description="AI Coachella Valley tracks practical AI adoption across cities and sectors with dated briefs, tools, and workshops for local operators."
>
  <section class="hero">
    <h1>AI Coachella Valley (AICV)</h1>
    <p>
      Trust-first intelligence for regional AI adoption: practical suggestions, dated briefs, and concise reports you can use.
    </p>
    <div class="cta-row">
      <a class="btn btn-primary" href="/briefs">Explore Marketplace</a>
      <a class="btn btn-secondary" href="/briefs">Read Briefs</a>
      <a class="btn btn-secondary" href="/events">Browse Events</a>
    </div>
  </section>

  <section>
    <h2>What you get here</h2>
    <div class="tool-callout">
      <h3>Free Tool: AI Visibility Checkup</h3>
      <p>Check AI visibility and readiness using our AI Visibility Checkup.</p>
      <a href="/tools/aio">Open the AI Visibility Checkup</a>
    </div>
    <div class="card-grid">
      <article class="card">
        <h3>Marketplace</h3>
        <p>Curated tools and practical plays for operators in the valley economy.</p>
        <a href="/briefs">Explore Marketplace</a>
      </article>
      <article class="card">
        <h3>Briefs: Quick</h3>
        <p>Time-stamped, verifiable indicators of real AI movement across sectors and cities.</p>
        <a href="/briefs">View Briefs</a>
      </article>
      <article class="card">
        <h3>Briefs + Reports</h3>
        <p>Decision-ready synthesis that turns activity into clear directional guidance.</p>
        <a href="/briefs">Read Briefs</a>
      </article>
    </div>
  </section>

  <section>
    <h2>Latest Briefs</h2>
    {signals.length === 0 ? (
      <p>No briefs yet.</p>
    ) : (
      <ul class="signal-list">
        {signals.map((signal) => (
          <li>
            <a href={`/briefs/${signal.slug}`}>{signal.data.title}</a>
            <p>{dateFormatter.format(signal.data.date)}</p>
          </li>
        ))}
      </ul>
    )}
  </section>

  <section>
    <h2>Featured Brief / State of AI</h2>
    <article class="feature-card">
      {featuredSignal ? (
        <>
          <h3>{featuredSignal.data.title}</h3>
          <p>{featuredSignal.data.summary}</p>
          <p class="feature-meta">Brief date: {dateFormatter.format(featuredSignal.data.date)}</p>
          <a href={`/briefs/${featuredSignal.slug}`}>Read the highlight</a>
        </>
      ) : (
        <>
          <h3>2025 AI Optimization Standards</h3>
          <p>A baseline reference for trusted implementation patterns and regional adoption readiness.</p>
          <a href="/docs/2025-ai-optimization-standards">Open State of AI highlight</a>
        </>
      )}
    </article>
  </section>

  <section>
    <h2>Marketplace</h2>
    <div class="tile-grid">
      <a class="tile" href="/briefs">Adoption playbooks</a>
      <a class="tile" href="/cities">City use cases</a>
      <a class="tile" href="/sectors">Sector use cases</a>
      <a class="tile" href="/framework">Method & guardrails</a>
      <a class="tile" href="/briefs">Brief evidence base</a>
      <a class="tile" href="/docs/2025-ai-optimization-standards">Standards reference</a>
    </div>
  </section>

  <section>
    <h2>Workshops & Bootcamps</h2>
    <div class="card-grid">
      <article class="card">
        <h3>Leadership AI Readiness Sprint</h3>
        <p>Half-day workshop for municipal and enterprise decision teams.</p>
        <a href="/events">Book this workshop</a>
      </article>
      <article class="card">
        <h3>Operations Automation Bootcamp</h3>
        <p>Two-session implementation sprint focused on measurable workflow gains.</p>
        <a href="/events">Reserve a cohort seat</a>
      </article>
      <article class="card">
        <h3>Workforce Upskilling Lab</h3>
        <p>Applied learning program built for frontline teams and managers.</p>
        <a href="/events">Request team onboarding</a>
      </article>
    </div>
  </section>

  <section>
    <h2>How AICV Works</h2>
    <ol class="flywheel">
      <li>Workshops</li>
      <li>Proof Artifacts</li>
      <li>Briefs: Quick</li>
      <li>Briefs</li>
      <li>State of AI</li>
    </ol>
  </section>

  <section id="subscribe">
    <h2>Stay Connected</h2>
    <div class="footer-cta">
      <a href="/briefs">Subscribe</a>
      <a href="/contact">Contact</a>
      <a href="/projects">Partners</a>
      <a href="/submit">Submit a Brief</a>
    </div>
  </section>
</BaseLayout>

<style>
  section + section {
    margin-top: var(--s-7);
  }

  .hero {
    padding: var(--s-6);
    border: 1px solid var(--c-border);
    border-radius: var(--r-md);
    background: var(--c-surface);
    box-shadow: var(--shadow-1);
  }

  .hero h1 {
    margin: 0;
  }

  .hero p {
    max-width: 66ch;
    color: var(--c-muted);
  }

  .cta-row {
    margin-top: var(--s-5);
    display: flex;
    flex-wrap: wrap;
    gap: var(--s-3);
  }

  .card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(17rem, 1fr));
    gap: var(--s-4);
  }

  .tool-callout {
    border: 1px solid var(--c-border);
    background: var(--c-surface);
    border-radius: var(--r-md);
    box-shadow: var(--shadow-1);
    padding: var(--s-5);
    margin-bottom: var(--s-4);
  }

  .tool-callout h3 {
    margin: 0;
  }

  .tool-callout p {
    margin: var(--s-2) 0 var(--s-3);
    color: var(--c-muted);
  }

  .tool-callout a {
    color: var(--c-indigo);
    font-weight: 600;
  }

  .card {
    border: 1px solid var(--c-border);
    border-radius: var(--r-md);
    background: var(--c-surface);
    box-shadow: var(--shadow-1);
    padding: var(--s-5);
  }

  .card h3 {
    margin-top: 0;
  }

  .card p {
    color: var(--c-muted);
  }

  .signal-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: grid;
    gap: var(--s-3);
  }

  .signal-list li {
    padding: var(--s-4) var(--s-5);
    border: 1px solid var(--c-border);
    border-radius: var(--r-md);
    background: var(--c-surface);
    transition: border-color 0.16s ease, box-shadow 0.16s ease;
  }

  .signal-list li:hover {
    border-color: color-mix(in srgb, var(--c-indigo) 38%, var(--c-border) 62%);
    box-shadow: var(--shadow-1);
  }

  .signal-list li > a {
    font-weight: 620;
    text-decoration: none;
  }

  .signal-list p {
    margin: var(--s-2) 0 0;
    color: var(--c-muted);
    font-size: 0.95rem;
  }

  .feature-card {
    border: 1px solid var(--c-border);
    border-radius: var(--r-md);
    background: var(--c-surface);
    box-shadow: var(--shadow-1);
    padding: var(--s-6);
  }

  .feature-card p {
    color: var(--c-muted);
  }

  .feature-meta {
    color: var(--c-muted);
    font-size: 0.95rem;
  }

  .tile-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(13rem, 1fr));
    gap: var(--s-3);
  }

  .tile {
    border: 1px solid var(--c-border);
    border-radius: var(--r-md);
    background: var(--c-surface);
    color: var(--c-indigo);
    text-decoration: none;
    padding: var(--s-4);
    font-weight: 600;
    transition: border-color 0.16s ease, background-color 0.16s ease;
  }

  .tile:hover {
    border-color: color-mix(in srgb, var(--c-indigo) 36%, var(--c-border) 64%);
    background: color-mix(in srgb, var(--c-surface) 92%, #edf4ff 8%);
  }

  .flywheel {
    margin: 0;
    padding-left: 1.2rem;
    display: grid;
    gap: var(--s-2);
  }

  .footer-cta {
    display: flex;
    flex-wrap: wrap;
    gap: var(--s-3) var(--s-4);
  }

  .footer-cta a {
    color: var(--c-indigo);
  }
</style>
