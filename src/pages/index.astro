---
import { getCollection } from "astro:content";
import BaseLayout from "../layouts/BaseLayout.astro";

const signals = (await getCollection("signals"))
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
  .slice(0, 5);

const featuredSignal = signals[0];

const dateFormatter = new Intl.DateTimeFormat("en-US", {
  year: "numeric",
  month: "short",
  day: "2-digit",
});
---

<BaseLayout title="AI Coachella Valley (AICV)">
  <section class="hero">
    <h1>AI Coachella Valley (AICV)</h1>
    <p>
      Trust-first intelligence for regional AI adoption: practical suggestions, dated briefs, and concise reports you can use.
    </p>
    <div class="cta-row">
      <a class="cta-primary" href="/marketplace">Explore AICV Suggests</a>
      <a class="cta-secondary" href="/briefs">Read Briefs</a>
      <a class="cta-tertiary" href="/events">Browse Events</a>
    </div>
  </section>

  <section>
    <h2>What you get here</h2>
    <div class="tool-callout">
      <h3>Free Tool: AI Visibility Checkup</h3>
      <p>Check AI visibility and readiness using the public AIO score workflow.</p>
      <a href="/tools/aio">Open the AI Visibility Checkup</a>
    </div>
    <div class="card-grid">
      <article class="card">
        <h3>Suggests</h3>
        <p>Curated tools and practical plays for operators in the valley economy.</p>
        <a href="/marketplace">Explore Suggests</a>
      </article>
      <article class="card">
        <h3>Briefs: Quick</h3>
        <p>Time-stamped, verifiable indicators of real AI movement across sectors and cities.</p>
        <a href="/briefs">View Briefs</a>
      </article>
      <article class="card">
        <h3>Briefs + Reports</h3>
        <p>Decision-ready synthesis that turns activity into clear directional guidance.</p>
        <a href="/briefs">Read Briefs</a>
      </article>
    </div>
  </section>

  <section>
    <h2>Latest Briefs</h2>
    {signals.length === 0 ? (
      <p>No briefs yet.</p>
    ) : (
      <ul class="signal-list">
        {signals.map((signal) => (
          <li>
            <a href={`/briefs/${signal.slug}`}>{signal.data.title}</a>
            <p>{dateFormatter.format(signal.data.date)}</p>
          </li>
        ))}
      </ul>
    )}
  </section>

  <section>
    <h2>Featured Brief / State of AI</h2>
    <article class="feature-card">
      {featuredSignal ? (
        <>
          <h3>{featuredSignal.data.title}</h3>
          <p>{featuredSignal.data.summary}</p>
          <p class="feature-meta">Brief date: {dateFormatter.format(featuredSignal.data.date)}</p>
          <a href="/briefs">Read the highlight</a>
        </>
      ) : (
        <>
          <h3>2025 AI Optimization Standards</h3>
          <p>A baseline reference for trusted implementation patterns and regional adoption readiness.</p>
          <a href="/docs/2025-ai-optimization-standards">Open State of AI highlight</a>
        </>
      )}
    </article>
  </section>

  <section>
    <h2>AICV Suggests</h2>
    <div class="tile-grid">
      <a class="tile" href="/marketplace">Adoption playbooks</a>
      <a class="tile" href="/cities">City use cases</a>
      <a class="tile" href="/sectors">Sector use cases</a>
      <a class="tile" href="/framework">Method & guardrails</a>
      <a class="tile" href="/briefs">Brief evidence base</a>
      <a class="tile" href="/docs/2025-ai-optimization-standards">Standards reference</a>
    </div>
  </section>

  <section>
    <h2>Workshops & Bootcamps</h2>
    <div class="card-grid">
      <article class="card">
        <h3>Leadership AI Readiness Sprint</h3>
        <p>Half-day workshop for municipal and enterprise decision teams.</p>
        <a href="/events">Book this workshop</a>
      </article>
      <article class="card">
        <h3>Operations Automation Bootcamp</h3>
        <p>Two-session implementation sprint focused on measurable workflow gains.</p>
        <a href="/events">Reserve a cohort seat</a>
      </article>
      <article class="card">
        <h3>Workforce Upskilling Lab</h3>
        <p>Applied learning program built for frontline teams and managers.</p>
        <a href="/events">Request team onboarding</a>
      </article>
    </div>
  </section>

  <section>
    <h2>How AICV Works</h2>
    <ol class="flywheel">
      <li>Workshops</li>
      <li>Proof Artifacts</li>
      <li>Briefs: Quick</li>
      <li>Briefs</li>
      <li>State of AI</li>
    </ol>
  </section>

  <section id="subscribe">
    <h2>Stay Connected</h2>
    <div class="footer-cta">
      <a href="/briefs">Subscribe</a>
      <a href="/contact">Contact</a>
      <a href="/projects">Partners</a>
      <a href="/contact">Submit a Brief</a>
    </div>
  </section>
</BaseLayout>

<style>
  section + section {
    margin-top: 2.5rem;
  }

  .hero {
    padding: 1.5rem;
    border: 1px solid #d8dbe1;
    background: #fff;
  }

  .hero h1 {
    margin: 0;
  }

  .cta-row {
    margin-top: 1rem;
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem;
  }

  .cta-row a {
    text-decoration: none;
    border-radius: 0.35rem;
    padding: 0.55rem 0.8rem;
    font-weight: 600;
  }

  .cta-primary {
    background: #184a9c;
    color: #fff;
  }

  .cta-secondary {
    border: 1px solid #184a9c;
    color: #184a9c;
  }

  .cta-tertiary {
    color: #184a9c;
  }

  .card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(14rem, 1fr));
    gap: 1rem;
  }

  .tool-callout {
    border: 1px solid #d8dbe1;
    background: #fff;
    padding: 1rem;
    margin-bottom: 1rem;
  }

  .tool-callout h3 {
    margin: 0;
  }

  .tool-callout p {
    margin: 0.5rem 0;
  }

  .tool-callout a {
    color: #184a9c;
    font-weight: 600;
  }

  .card {
    border: 1px solid #d8dbe1;
    background: #fff;
    padding: 1rem;
  }

  .card h3 {
    margin-top: 0;
  }

  .signal-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: grid;
    gap: 0.8rem;
  }

  .signal-list li {
    padding: 0.9rem 1rem;
    border: 1px solid #d8dbe1;
    background: #fff;
  }

  .signal-list p {
    margin: 0.35rem 0 0;
    color: #4b5360;
    font-size: 0.95rem;
  }

  .feature-card {
    border: 1px solid #d8dbe1;
    background: #fff;
    padding: 1rem;
  }

  .feature-meta {
    color: #4b5360;
    font-size: 0.95rem;
  }

  .tile-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(12rem, 1fr));
    gap: 0.8rem;
  }

  .tile {
    border: 1px solid #d8dbe1;
    background: #fff;
    color: #184a9c;
    text-decoration: none;
    padding: 0.85rem;
    font-weight: 600;
  }

  .flywheel {
    margin: 0;
    padding-left: 1.2rem;
    display: grid;
    gap: 0.4rem;
  }

  .footer-cta {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem 1rem;
  }

  .footer-cta a {
    color: #184a9c;
  }
</style>
